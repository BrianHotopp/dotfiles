set -g prefix C-Space
unbind C-b
bind C-Space send-prefix

set -g mode-keys emacs
set -g mouse on

# Cross-platform clipboard: macOS pbcopy, then Wayland, then X11.
run-shell 'if command -v pbcopy >/dev/null 2>&1; then \
    tmux set -g @copy_command "pbcopy"; \
  elif command -v wl-copy >/dev/null 2>&1; then \
    tmux set -g @copy_command "wl-copy"; \
  elif command -v xclip >/dev/null 2>&1; then \
    tmux set -g @copy_command "xclip -selection clipboard -in"; \
  else \
    tmux set -g @copy_command "xsel --clipboard --input"; \
  fi'

bind -T copy-mode y send-keys -X copy-pipe-and-cancel "#{@copy_command}"
bind -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "#{@copy_command}"
bind P paste-buffer

# Better color support across terminals
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*:Tc"
